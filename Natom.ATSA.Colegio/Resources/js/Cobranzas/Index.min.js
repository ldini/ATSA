function Anular(n,t,i){var r=n,u=t,f=i;Mensajes.MostrarSiNo("¿Desea eliminar la Cobranza?",function(){MostrarCargando();$.ajax({url:"/colegiotest/cobranzas/Anular",method:"POST",data:{inscripcionId:r,mes:u,anio:f},dataType:"json",success:function(n){n.success==!0?location.href="/colegiotest/cobranzas/Index":(Mensajes.MostrarError(n.error),OcultarCargando())}})})}function Imprimir(n){window.open("/colegiotest/cobranzas/ImprimirReciboDePago?id="+n,"_blank")}function MostrarDocsPendientes(n){MostrarCargando();$.ajax({url:"/colegiotest/inscripciones/ObtenerDocumentacionFaltantePorInscripcion",method:"POST",data:{inscripcionId:n},dataType:"json",success:function(n){if(OcultarCargando(),n.success==!0){if(n.pendientes.length>0){var t="<h4>Documentación pendiente de entregar:<\/h4>";t+="<ul style='text-align: left;'>";$.each(n.pendientes,function(n,i){t+="<li>"+i.value+"<\/li>"});t+="<\/ul>"}Mensajes.MostrarOK(t)}else Mensajes.MostrarError(n.error)}})}$(document).ready(function(){$("#tbl").on("click",".btnEliminar",function(){MostrarCargando();var n=$(this).attr("data-id");$.ajax({url:"/colegiotest/cicloslectivos/EliminarCicloLectivo?CicloLectivoId="+n,method:"GET",dataType:"html",success:function(){location.reload()}})});$("#tbl").on("click",".btnCobrar",function(){var n=$(this).attr("inscripcion-id"),t=$(this).attr("mes"),i=$(this).attr("anio");AbrirModalCobranza(n,t,i)});$("#NuevoCicloLectivo").on("click",function(){MostrarCargando();$.ajax({url:"/colegiotest/cicloslectivos/AbrirModal?CicloLectivoId=0",method:"GET",dataType:"html",success:function(n){$("#divModal").html(n);$("#divModal").find("#modalCicloLectivo").modal("show");OcultarCargando()}})});var n=$("#tbl").dataTable({bProcessing:!0,bServerSide:!0,ajax:{url:"/colegiotest/cobranzas/ObtenerListadoIndex",type:"POST"},bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,order:[[5,"desc"]],aoColumns:[{bSortable:!0,sWidth:"7%"},{bSortable:!0,sWidth:"23%"},{bSortable:!0,sWidth:"7%"},{bSortable:!0,sWidth:"18%"},{bSortable:!1,sWidth:"11%"},{bSortable:!0,sWidth:"7%"},{bSortable:!0,sWidth:"7%"},{bSortable:!0,sWidth:"8%"},{bSortable:!1,sWidth:"11%",mRender:function(n,t,i){var s=n,h=i[9],u=i[10],f=i[11],e=i[12],o=i[13],r="";return o&&(r+="&nbsp;<a class='btn btn-warning btn-xs' onclick='MostrarDocsPendientes("+n+")'>&nbsp;!&nbsp;<\/a>"),u===null?r+="&nbsp;<a class='btn btn-primary btn-xs btnCobrar' inscripcion-id='"+n+"' mes='"+f+"' anio='"+e+"'>Cobrar<\/a>":(r+="&nbsp;<a class='btn btn-primary btn-xs' href='javascript:Imprimir("+u+")'>Imprimir<\/a>",r+="&nbsp;<a class='btn btn-danger btn-xs btnAnular' href='javascript:Anular("+n+", "+f+", "+e+")'>Anular<\/a>"),r}}]})});